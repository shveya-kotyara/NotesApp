'use strict';

var BB = require('bluebird');

var contentPath = require('./path');

var hasContent = require('./read').hasContent;

var rimraf = BB.promisify(require('rimraf'));
module.exports = rm;

function rm(cache, integrity) {
  return hasContent(cache, integrity).then(function (content) {
    if (content) {
      var sri = content.sri;

      if (sri) {
        return rimraf(contentPath(cache, sri)).then(function () {
          return true;
        });
      }
    } else {
      return false;
    }
  });
}