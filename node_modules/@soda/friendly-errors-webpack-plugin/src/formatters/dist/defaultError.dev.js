'use strict';

var concat = require('../utils').concat;

var formatTitle = require('../utils/colors').formatTitle;

function displayError(severity, error) {
  var baseError = formatTitle(severity, severity);
  return concat("".concat(baseError, " ").concat(removeLoaders(error.file)), '', error.message, error.origin ? error.origin : undefined, '', error.infos);
}

function removeLoaders(file) {
  if (!file) {
    return "";
  }

  var split = file.split('!');
  var filePath = split[split.length - 1];
  return "in ".concat(filePath);
}

function isDefaultError(error) {
  return !error.type;
}
/**
 * Format errors without a type
 */


function format(errors, type) {
  return errors.filter(isDefaultError).reduce(function (accum, error) {
    return accum.concat(displayError(type, error));
  }, []);
}

module.exports = format;