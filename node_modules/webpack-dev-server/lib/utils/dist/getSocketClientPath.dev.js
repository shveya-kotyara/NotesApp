'use strict';

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function getSocketClientPath(options) {
  var ClientImplementation;
  var clientImplFound = true;

  switch (_typeof(options.transportMode.client)) {
    case 'string':
      // could be 'sockjs', 'ws', or a path that should be required
      if (options.transportMode.client === 'sockjs') {
        ClientImplementation = require('../../client/clients/SockJSClient');
      } else if (options.transportMode.client === 'ws') {
        ClientImplementation = require('../../client/clients/WebsocketClient');
      } else {
        try {
          // eslint-disable-next-line import/no-dynamic-require
          ClientImplementation = require(options.transportMode.client);
        } catch (e) {
          clientImplFound = false;
        }
      }

      break;

    default:
      clientImplFound = false;
  }

  if (!clientImplFound) {
    throw new Error("transportMode.client must be a string denoting a default implementation (e.g. 'sockjs', 'ws') or a full path to " + 'a JS file which exports a class extending BaseClient (webpack-dev-server/client-src/clients/BaseClient) ' + 'via require.resolve(...)');
  }

  return ClientImplementation.getClientPath(options);
}

module.exports = getSocketClientPath;