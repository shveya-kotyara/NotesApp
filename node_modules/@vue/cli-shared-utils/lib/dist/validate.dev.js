"use strict";

var _require = require('./exit'),
    exit = _require.exit; // proxy to joi for option validation


exports.createSchema = function (fn) {
  return fn(require('@hapi/joi'));
};

exports.validate = function (obj, schema, cb) {
  require('@hapi/joi').validate(obj, schema, {}, function (err) {
    if (err) {
      cb(err.message);

      if (process.env.VUE_CLI_TEST) {
        throw err;
      } else {
        exit(1);
      }
    }
  });
};

exports.validateSync = function (obj, schema) {
  var result = require('@hapi/joi').validate(obj, schema);

  if (result.error) {
    throw result.error;
  }
};