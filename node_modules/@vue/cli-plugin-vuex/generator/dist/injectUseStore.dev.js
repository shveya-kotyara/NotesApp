"use strict";

module.exports = function (file, api) {
  var j = api.jscodeshift;
  var root = j(file.source);
  var appRoots = root.find(j.CallExpression, function (node) {
    if (j.Identifier.check(node.callee) && node.callee.name === 'createApp') {
      return true;
    }

    if (j.MemberExpression.check(node.callee) && j.Identifier.check(node.callee.object) && node.callee.object.name === 'Vue' && j.Identifier.check(node.callee.property) && node.callee.property.name === 'createApp') {
      return true;
    }
  });
  appRoots.replaceWith(function (_ref) {
    var createAppCall = _ref.node;
    return j.callExpression(j.memberExpression(createAppCall, j.identifier('use')), [j.identifier('store')]);
  });
  return root.toSource();
};