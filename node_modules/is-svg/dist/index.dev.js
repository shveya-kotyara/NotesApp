'use strict';

var htmlCommentRegex = require('html-comment-regex');

function isBinary(buf) {
  var isBuf = Buffer.isBuffer(buf);

  for (var i = 0; i < 24; i++) {
    var charCode = isBuf ? buf[i] : buf.charCodeAt(i);

    if (charCode === 65533 || charCode <= 8) {
      return true;
    }
  }

  return false;
}

var regex = /^\s*(?:<\?xml[^>]*>\s*)?(?:<!doctype svg[^>]*\s*(?:\[?(?:\s*<![^>]*>\s*)*\]?)*[^>]*>\s*)?<svg[^>]*>[^]*<\/svg>\s*$/i;

module.exports = function (input) {
  return Boolean(input) && !isBinary(input) && regex.test(input.toString().replace(htmlCommentRegex, ''));
};