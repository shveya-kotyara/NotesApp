"use strict";

var optsArg = require('./lib/opts-arg.js');

var pathArg = require('./lib/path-arg.js');

var _require = require('./lib/mkdirp-native.js'),
    mkdirpNative = _require.mkdirpNative,
    mkdirpNativeSync = _require.mkdirpNativeSync;

var _require2 = require('./lib/mkdirp-manual.js'),
    mkdirpManual = _require2.mkdirpManual,
    mkdirpManualSync = _require2.mkdirpManualSync;

var _require3 = require('./lib/use-native.js'),
    useNative = _require3.useNative,
    useNativeSync = _require3.useNativeSync;

var mkdirp = function mkdirp(path, opts) {
  path = pathArg(path);
  opts = optsArg(opts);
  return useNative(opts) ? mkdirpNative(path, opts) : mkdirpManual(path, opts);
};

var mkdirpSync = function mkdirpSync(path, opts) {
  path = pathArg(path);
  opts = optsArg(opts);
  return useNativeSync(opts) ? mkdirpNativeSync(path, opts) : mkdirpManualSync(path, opts);
};

mkdirp.sync = mkdirpSync;

mkdirp["native"] = function (path, opts) {
  return mkdirpNative(pathArg(path), optsArg(opts));
};

mkdirp.manual = function (path, opts) {
  return mkdirpManual(pathArg(path), optsArg(opts));
};

mkdirp.nativeSync = function (path, opts) {
  return mkdirpNativeSync(pathArg(path), optsArg(opts));
};

mkdirp.manualSync = function (path, opts) {
  return mkdirpManualSync(pathArg(path), optsArg(opts));
};

module.exports = mkdirp;