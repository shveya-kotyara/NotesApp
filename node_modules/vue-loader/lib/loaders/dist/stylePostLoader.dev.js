"use strict";

var qs = require('querystring');

var _require = require('@vue/component-compiler-utils'),
    compileStyle = _require.compileStyle; // This is a post loader that handles scoped CSS transforms.
// Injected right before css-loader by the global pitcher (../pitch.js)
// for any <style scoped> selection requests initiated from within vue files.


module.exports = function (source, inMap) {
  var query = qs.parse(this.resourceQuery.slice(1));

  var _compileStyle = compileStyle({
    source: source,
    filename: this.resourcePath,
    id: "data-v-".concat(query.id),
    map: inMap,
    scoped: !!query.scoped,
    trim: true
  }),
      code = _compileStyle.code,
      map = _compileStyle.map,
      errors = _compileStyle.errors;

  if (errors.length) {
    this.callback(errors[0]);
  } else {
    this.callback(null, code, map);
  }
};