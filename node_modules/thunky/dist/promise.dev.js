"use strict";

module.exports = thunkyp;

function thunkyp(fn) {
  var running = null;
  return ready;

  function ready() {
    if (running) return running;
    var p = fn();
    if (!(p instanceof Promise)) running = Promise.resolve(p);else running = p;
    running["catch"](onerror);
    return running;
  }

  function onerror() {
    running = null;
  }
}